@using System.Diagnostics

<div>
    @foreach(int item in ButtonItems)
    {
        if (item == SelectedPage)
        {
            <button disabled>@(item+1)</button>
        }
        else
        {
            <button @onclick="()=> OnClick(item)">@(item+1)</button>
        }
    }
    <span>items: @TotalNumberOfItems</span>

</div>

@ChildContent 

@code 
{

    [Parameter]
    public EventCallback<int> OnSelectPage { get; set; }
    
    [Parameter]
    public int SelectedPage { get; set; }

    [Parameter]
    public int TotalNumberOfItems { get; set; }

    [Parameter]
    public int ItemsPerPage { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }


    private List<int> ButtonItems = new List<int>();

    protected override Task OnParametersSetAsync()
    {
        ButtonItems.Clear();
        for (int i = TotalNumberOfItems, j=0; i >0; i-=ItemsPerPage, j++)
        {
            ButtonItems.Add(j);
        }

        return base.OnParametersSetAsync();
    }

    private async Task OnClick(int i)
    {        
        await OnSelectPage.InvokeAsync(i);        
    }
   
}
